server.port=5001

spring.datasource.url=jdbc:postgresql://${PGHOST:localhost}:${PGPORT:5432}/${PGDATABASE:techmonitor}
spring.datasource.username=${PGUSER:root}
spring.datasource.password=${PGPASSWORD:12345}
spring.datasource.driver-class-name=org.postgresql.Driver

spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true

spring.session.store-type=jdbc
spring.session.jdbc.initialize-schema=never
spring.session.jdbc.table-name=SPRING_SESSION

spring.jackson.serialization.write-dates-as-timestamps=false

# Feature Flags
app.feature.keycloak-enabled=${KEYCLOAK_ENABLED:false}
app.feature.email-enabled=${EMAIL_ENABLED:false}

# Keycloak OAuth2/OIDC Configuration (only used when KEYCLOAK_ENABLED=true)
spring.security.oauth2.client.registration.keycloak.client-id=${KEYCLOAK_CLIENT_ID:techmonitor}
spring.security.oauth2.client.registration.keycloak.client-secret=${KEYCLOAK_CLIENT_SECRET:}
spring.security.oauth2.client.registration.keycloak.scope=openid,profile,email
spring.security.oauth2.client.registration.keycloak.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.keycloak.redirect-uri={baseUrl}/api/oauth2/callback/keycloak
spring.security.oauth2.client.provider.keycloak.issuer-uri=${KEYCLOAK_ISSUER_URI:http://localhost:8080/realms/techmonitor}
spring.security.oauth2.client.provider.keycloak.user-name-attribute=preferred_username

# SMTP Email Configuration (only used when EMAIL_ENABLED=true)
# Default: Zoho Mail SMTP
spring.mail.host=${SMTP_HOST:smtp.zoho.com}
spring.mail.port=${SMTP_PORT:587}
spring.mail.username=${SMTP_USERNAME:techtarget@zohomail.com}
spring.mail.password=${SMTP_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.protocols=TLSv1.2
logging.level.org.springframework.mail=DEBUG
logging.level.com.errortracker.service=DEBUG

# Application Email Settings
app.email.from=${EMAIL_FROM:noreply@techmonitor.app}
app.email.base-url=${APP_BASE_URL:http://localhost:5000}
